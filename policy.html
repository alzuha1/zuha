<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Policy</title>
  <link rel="stylesheet" href="assets/css/main.css" />
</head>

<body>
  <header class="topbar">
    <div class="container topbar__inner">
      <a class="brand" href="index.html#home" aria-label="Home">
        <span class="brand__logo">DOR</span>
      </a>

      <div class="tools">
        <button class="btn btn--ghost" id="langBtn" type="button">
          <span class="icon">ğŸŒ</span>
          <span id="langLabel">AR</span>
        </button>

        <button class="btn btn--ghost" id="themeBtn" type="button">
          <span class="icon">ğŸŒ“</span>
          <span id="themeLabel"></span>
        </button>
      </div>
    </div>
  </header>

  <main class="section">
    <div class="container policyPage">
      <h1 class="policyTitle" id="policyTitle"></h1>
      <div class="policyBody" id="policyBody"></div>

      <div class="policyBack">
        <a class="btn btn--ghost" href="index.html#footer">â† <span data-i18n="policy.back"></span></a>
      </div>
    </div>
  </main>

  <script src="assets/js/i18n.js"></script>
  <script src="assets/js/theme.js"></script>

  <script>
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª ÙˆØ¹Ø±Ø¶ Ø³ÙŠØ§Ø³Ø© Ø­Ø³Ø¨ slug
    (async function () {
      // Ù‚Ø±Ø§Ø¡Ø© slug Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
      const params = new URLSearchParams(location.search);
      const slug = params.get("slug") || "privacy";

      // ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª
      const policies = await fetch("content/policies.json").then(r => r.json());

      // Ø¥ÙŠØ¬Ø§Ø¯ Ø§Ù„Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
      const item = policies.items.find(p => p.slug === slug) || policies.items[0];

      // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
      await window.I18N.init();

      // ØªØ­Ø¯ÙŠØ¯ Ø¹Ù†ÙˆØ§Ù† ÙˆÙ…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³ÙŠØ§Ø³Ø© Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ©
      const lang = window.I18N.getLang();
      document.getElementById("policyTitle").textContent = item.title[lang] || item.title.ar;
      document.getElementById("policyBody").innerHTML = item.body[lang] || item.body.ar;

      // ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø°Ø§Øª data-i18n
      window.I18N.apply();
      // Ø¶Ø¨Ø· Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù„ØºØ© ÙˆØ§Ù„Ø«ÙŠÙ…
      window.Theme.initThemeUI();
      window.I18N.initLangUI();
    })();
  </script>
</body>
</html>
